# 1. Base Image  - Operating system for container
FROM <base_image>:<tag>
  +base_image = operating system
  +tag = version
Ex: FROM debian:buster

# 2. Metadata - <information about the container's image> -> no impact on operation
LABEL maintainer="your-email@example.com"
LABEL version="1.0"
LABEL description="Description of container"

# 3. Arguments (build-time variables) -> used only in building image
ARG BUILD_ARG=default_value
Ex:
    ARG VERSION=10.6
    ARG USER_ID=1000

    FROM mariadb:${VERSION}           # ← Dùng khi build image
    RUN useradd -u ${USER_ID} mysql   # ← Dùng khi build image

# 4. Environment Variables (runtime) -> used in run container process
ENV VARIABLE_NAME=value
ENV PATH=/usr/local/bin:$PATH
Ex:
    ENV MYSQL_ROOT_PASSWORD=secret123
    ENV MYSQL_DATABASE=wordpress_db

# 5. Install packages & dependencies
RUN <install_commands> \
    && <cleanup_commands>
Ex:
    # Package installation
    RUN apt-get update \
        && apt-get install -y \
            mariadb-server \
            mariadb-client \
            wget \
            curl \
        && rm -rf /var/lib/apt/lists/*

    # Compile from source
    RUN wget https://source.tar.gz \
        && tar -xzf source.tar.gz \
        && cd source \
        && make install \
        && cd .. \
        && rm -rf source*

# 6. Copy files -> customize specific configs -> service config
COPY <source> <destination>
ADD <source_with_extract> <destination>
Ex:
    COPY my-custom.conf /etc/mysql/ 

# 7. Set working directory
WORKDIR <directory>

# 8. Create users/permissions
RUN useradd -r <username>
RUN chown -R <user>:<group> <directory>

# 9. Create volumes (data persistence)
VOLUME ["<mount_point>"]

# 10. Switch user (security)
USER <username>

# 11. Expose ports
EXPOSE <port>

# 12. Health check
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD <health_command> || exit 1

# 13. Signal handling
STOPSIGNAL SIGTERM

# 14. Entry point & Command
ENTRYPOINT ["executable"]
CMD ["param1", "param2"]